

# Создание простой сборки с ограничением

* Запустите FreeCAD и создайте новый документ
* Переключитесь на верстак `Part` и создайте` Cube` и `Cylinder`
* Переключитесь на рабочую среду `Assembly3`, нажмите! [AddAssembly] (../ raw / master / freecad / asm3 / Gui / Resources / icons / Assembly_New_Assembly.svg? Sanitize = true) 
  создать новую сборку
* Выделите куб и цилиндр и перетащите их в новую сборку.
* Выберите любую грань `Cylinder` или` Cube` и нажмите! [Move] (../ raw / master / freecad / asm3 / Gui / Resources / icons / Assembly_Move.svg? Sanitize = true), чтобы
  активировать ручное перемещение детали. Щелкните любую стрелку, чтобы перетащить «Цилиндр» на вершину «Куба», нажмите клавишу «ESC», чтобы оставить движение детали (Альтернатива:
  щелкните правой кнопкой мыши «Сборка» в древовидном представлении и выберите «Завершить редактирование») 
* Выберите верхнюю грань `Cube` и (удерживая клавишу` CTRL`) выберите нижнюю грань или край `Cylinder`, а затем щелкните! [AddCoincidence] (../ raw / master / freecad / asm3 / Gui / Resources / icons / constraints / Assembly_ConstraintCoincidence.svg? Sanitize = true) для создания ограничения совпадения плоскостей.
* Наконец, нажмите! [Решить] (../ raw / master / freecad / asm3 / Gui / Resources / icons / AssemblyWorkbench.svg? Sanitize = true), чтобы решить систему ограничений.

[[images / simple.gif]]

Вы можете щелкнуть! [Автопересчет] (../ raw / master / freecad / asm3 / Gui / Resources / icons / Assembly_AutoRecompute.svg? Sanitize = true), чтобы включить автоматическое решение при любых изменениях ограничений.

После создания нового ограничения выбранные элементы будут выделены красным цветом. Вы можете легко изменить цвет отдельных ограничивающих элементов на странице свойств объекта просмотра. Или установите цвет всего ограничения, изменив цвет самого объекта ограничения. Убедитесь, что вы установили для свойства просмотра OverrideMaterial значение True.  

Если вы обнаружите, что подсветка ограничивающего элемента закрывает трехмерный вид сборки, вы можете включить функцию _Auto Element Visibility_, щелкнув! [AutoElementVis] (../ raw / master / freecad / asm3 / Gui / Resources / icons / Assembly_AutoElementVis.svg ? sanitize = true). Если этот параметр включен, все ограничивающие элементы по умолчанию будут скрыты. Вы можете выявить их, выбрав любое ограничение или объект элемента ограничения в древовидной структуре.

Теперь сохраните этот документ под любым именем.

# Создайте суперсборку с массивом внешних ссылок

Мы собираемся построить объект с несколькими шарнирами, используя указанную выше сборку в качестве базовой детали.

* Создайте новый документ и сохраните его под любым именем. Да, вам нужно сохранить как ссылку, так и связанный документ хотя бы один раз, чтобы внешняя ссылка работала, потому что `PropertyXLink` нужна информация о пути к файлу обоих документов для вычисления относительного пути.
* Убедитесь, что текущий активный 3D-вид - это новый пустой документ. Теперь в древовидном представлении выберите сборку, которую мы только что создали, затем, удерживая клавишу `CTRL`, щелкните правой кнопкой мыши новый элемент документа в древовидном представлении и выберите` Связать действия -> Создать ссылку`. Будет создана ссылка, которая перенесет сборку в новый документ. Возможно, вам нужно будет нажать кнопку «Подогнать содержимое» (или нажать «V, F» в 3D-виде), чтобы увидеть сборку.
* Выберите ссылку в представлении в виде дерева и измените свойство ElementCount на четыре. Теперь у вас есть четыре одинаковых сборки.
* Создайте новую сборку, а затем перетащите в нее объект ссылки.
* Выберите любую грань любого `Куба`, нажмите! [Переместить] (../ raw / master / freecad / asm3 / Gui / Resources / icons / Assembly_Move.svg? Sanitize = true) и щелкните любую стрелку, чтобы перетащить, чтобы развернуть части. Щелкните по краям сферы перемещения, чтобы повернуть деталь. Нажмите Esc, чтобы оставить движение детали.
* Выберите любую грань самого левого `Cube` в 3D-виде и нажмите! [Lock] (../ raw / master / freecad / asm3 / Gui / Resources / icons / constraints / Assembly_ConstraintLock.svg? Sanitize = true), чтобы заблокируйте крайний левый узел.
* Сориентируйте детали как хотите. Выберите две грани из любых двух сборок и создайте ограничение совпадения плоскостей. Если вы включили _auto
  Recompute_, тогда две сборки теперь будут соединены вместе
* Проделайте то же самое с остальными частями.

[[images / super.gif]]

Теперь, когда мы сделали эту штуку с несколькими стыками, попробуйте сохранить этот документ, и FreeCAD спросит, хотите ли вы сохранить и внешний документ. Если вы ответите «да», FreeCAD позаботится о порядке и сохранит внешний документ перед тем, как связать документ.

Закройте оба документа. Откройте документ сборки с несколькими соединениями, FreeCAD также автоматически откроет любые документы, на которые есть внешние ссылки. Если вы закроете внешний документ, оставив связанный документ открытым, все внешние связанные объекты исчезнут из 3D вида. Откройте внешний документ еще раз, и объекты снова появятся. Это позволяет легко заменить документ на замену по любой причине. Но он требует, чтобы замещающий документ имел объект с тем же внутренним именем, что и исходный связанный. Конечно, вы можете легко переназначить ссылку на любой другой объект в открытых документах. Просто воспользуйтесь редактором свойств, нажмите кнопку редактирования свойства LinkedObject. В окне редактора выберите нужный документ в раскрывающемся списке, а затем выберите нужный объект. Но сейчас,вам необходимо убедиться, что новый связанный объект имеет тот же интерфейс элемента, иначе ограничения будут нарушены.

Еще несколько слов о массиве ссылок. Assembly3 обычно обрабатывает любой объект, добавленный в его группу деталей, как отдельный объект, который можно перемещать как единое целое. Однако он имеет особую обработку для объекта массива ссылок. Каждый элемент массива будет рассматриваться как отдельные объекты, которые можно ограничивать и перемещать индивидуально. Если вы действительно хотите добавить массив как составную часть, просто оберните массив внутри фиктивной сборки без каких-либо ограничений и добавьте эту сборку вместо этого в родительскую сборку.

Между прочим, в верстаке Draft теперь есть два варианта массива ссылок, LinkArray и LinkPathArray, которые предоставляют те же функции, что и Draft, Array и PathArray, но используют ссылку для предоставления дубликатов. Эти массивы ссылок по умолчанию не отображают отдельные элементы в виде дерева. Вы по-прежнему можете получить доступ к каждому элементу через ссылку `subname`, как обычно. Использование меньшего количества объектов может улучшить скорость сохранения и загрузки документов. Это особенно заметно при большом количестве элементов массива. Однако вы можете отобразить элемент массива в любое время, переключив свойство ShowElement. Как только элементы станут видимыми, их можно будет перемещать независимо, изменив их расположение.

# Добавить / изменить элемент и ElementLink

Довольно легко напрямую создать новое ограничение, как показано выше, со всеми задействованными `Element` и` ElementLink`, которые позаботятся за вас Assembly3. Также просто вручную добавить новые или изменить существующие `Elements` и` ElementLink`. Просто выберите геометрический элемент в 3D-виде, и соответствующий объект-владелец будет выбран в древовидном представлении (не забудьте включить опцию _Sync selection_ в древовидном представлении, как упоминалось ранее). Затем вы можете перетащить выбранный элемент в ElementGroup в Assembly, чтобы создать новый Element, или в Constraint, чтобы добавить ElementLink. Вы можете изменить существующий элемент Element или ElementLink, просто перетащив элемент на существующий элемент Element или ElementLink. Оформить заказ [[this | Замена детали]] для демонстрации.

# Перемещение части

Assembly3 имеет обширную поддержку ручного перемещения вложенной сборки. В трехмерном виде выберите любой геометрический элемент (грань, край), принадлежащий какой-либо сборке, и нажмите! [Переместить] (../ raw / master / freecad / asm3 / Gui / Resources / icons / Assembly_Move.svg? Sanitize = true ), чтобы активировать перетаскивание детали. Перетаскивающий элемент будет центрирован вокруг выбранного геометрического элемента. В случае сборок с несколькими иерархиями вы будете перетаскивать подсборку первого уровня сборки верхнего уровня. Если вместо этого вы хотите перетащить промежуточную подсборку, добавьте эту сборку в качестве второго выбора (выбор «CTRL») перед активацией перемещения детали.

Если вы включили! [AutoRecompute] (../ raw / master / freecad / asm3 / Gui / Resources / icons / Assembly_AutoRecompute.svg? Sanitize = true), любое перемещение подсборки приведет к автопересчету родительской сборки -решите его ограничения, как показано ниже. Поскольку остается слишком много степеней свободы и, следовательно, множество возможных решений системы ограничений, движение многосуставного узла рывчатое. Кроме того, команда перемещения детали очень сложна и, вероятно, потребует гораздо больше работы, чтобы сделать ее идеальной. В случае, когда детали перемещаются так, что они застряли в каком-то недопустимом положении, как вы можете видеть на приведенном ниже скриншоте, просто нажмите CTRL + Z, чтобы отменить движение. Каждый раз, когда вы отпускаете кнопку мыши, транзакция фиксируется, так что вы можете отменить / повторить предыдущее перетаскивание мышью.Вы также можете временно обойти пересчет, удерживая клавишу CTRL во время перетаскивания.


[[images / move.gif]]

# Импортировать внешнюю сборку

В некоторых случаях будет проще распространить вашу сборку с несколькими иерархиями как отдельный автономный документ. Ядро FreeCAD предоставляет удобную команду для решения этой, в остальном, не столь тривиальной задачи. Просто щелкните правой кнопкой мыши любой элемент в документе, который вы хотите распространить, и выберите «Действия со ссылками -> Импортировать все ссылки», и все. Щелкните! [Решить] (../ raw / master / freecad / asm3 / Gui / Resources / icons / AssemblyWorkbench.svg? Sanitize = true), чтобы проверить, все ли в порядке. Конечно, вы можете выборочно импортировать любой объект, который хотите. Просто щелкните этот элемент правой кнопкой мыши и выберите «Действия ссылки -> Импортировать ссылку».

